<!DOCTYPE html>
<html>
<head>
<title>Employee</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<script src="js/jquery-3.3.1.js" type="text/javascript"></script>
<script src="js/underscore.js" type="text/javascript"></script>
<script src="js/backbone.js" type="text/javascript"></script>
<style>
body {
	background-color: #cdd3c4;
	text-align: center;
	margin: 80px;
}
div{
  padding: 10px;
}
</style>
</head>
<body>
	<h2 id="header">APPLY FOR LEAVES</h2>
<script type="text/javascript">
	var LeaveModel = Backbone.Model.extend({
		defaults : {
			id: null,
			noOfLeavesApplied: null,
            startDate: ""
		},
		url : 'http://localhost:8080/messenger/webapi/employee/applyLeave'
	});

	var LeaveView = Backbone.View.extend({
				template : _
						.template('<form><input name="noOfLeavesApplied" placeholder="leavesToApply" value="<%= noOfLeavesApplied %>"><input name="startDate" placeholder="StartDate" value="<%= startDate %>"><button>Save</button></form>'),
				events : {
					submit : 'save'
				},
				save : function(e) {
					e.preventDefault();
					var id = Number(sessionStorage.getItem("Id"));
					var noOfLeavesApplied = +this.$('input[name="noOfLeavesApplied"]').val();
					var startDate = this.$('input[name="startDate"]').val();
					this.model.save({
						 "id":id,
						 "leave":{
						 	"noOfLeavesApplied":noOfLeavesApplied,
						 	"startDate":startDate
						 }
					});
					this.model.toJSON();
				},
				render : function() {
					this.$el.html(this.template(this.model.attributes));
					return this;
				}
			});
	var leaveModel = new LeaveModel();
	var leaveView = new LeaveView({
		model : leaveModel
	});

	$(document.body).html(leaveView.render().el);
	</script>
</body>
</html>