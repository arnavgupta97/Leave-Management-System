<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<script src="js/jquery-3.3.1.js" type="text/javascript"></script>
<script src="js/underscore.js" type="text/javascript"></script>
<script src="js/backbone.js" type="text/javascript"></script>
<style>
body {
	background-color: #cdd3c4;
	text-align: center;
	margin: 80px;
}
div{
  padding: 40px;
}
</style>
</head>
<body>
<form>
<h2 id="header">Employee Management System</h2>
<label>Enter User ID:</label> <input type="number" id="myid"/><br>
<label>Enter User Password:</label> <input type="text" id="password"/><br>
<button type="button" class="btn btn-primary" onclick="Login()">Submit</button>
</form>
	<script type="text/javascript">
	function Login(){

		 var EmployeeModel = Backbone.Model.extend({
		        defaults: {
		            id: null,
		            name: "",
		            password: "",
		            userrole: "",
		            contact: null,
		            email: ""
		        }
		    });
		 var EmployeeCollection = Backbone.Collection.extend ({
			 model: EmployeeModel,
			 url:'/messenger/webapi/admin'
		 });
		
		 var employeeCollection = new EmployeeCollection();
		  
		 employeeCollection.fetch().then(function(){
			 
			 var res = employeeCollection.findWhere({'id': Number(document.getElementById("myid").value)});
			
			 var id=Number(document.getElementById("myid").value);
			 var password= document.getElementById("password").value;
			 
					if(res.get('id')==id  && res.get('password')==password){
		        		  
			        	if(res.get('userrole')=="administrator"){
			        	  
			        	  window.location.href ="/messenger/admin/adminPortal.html"
			        	  sessionStorage.setItem("Id",id);
			        	  
			          }else if(res.get('userrole')=="manager"){
			        	  
			        	  window.location.href ="/messenger/manager/ManagerPortal.html"
			        		  sessionStorage.setItem("Id",id);
			        	  
			          }else if (res.get('userrole')=="employee"){
			        	  
			        	  window.location.href ="/messenger/employee/EmployeePortal.html"
			        	  sessionStorage.setItem("Id",id);
			          }
			      } else{
					   alert("Invalid Details");
				   }
		});					
}			
	</script>
</body>
</html>