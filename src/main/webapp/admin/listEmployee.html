<!DOCTYPE html>
<html>
<head>
<title>Admin</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<script src="js/jquery-3.3.1.js" type="text/javascript"></script>
<script src="js/underscore.js" type="text/javascript"></script>
<script src="js/backbone.js" type="text/javascript"></script>
</head>
<style>
body {
	background-color: #cdd3c4;
	text-align: center;
	margin: 80px;
}
div{
  padding: 40px;
}
</style>
</head>
<body >
	<h2 id="header">LIST ALL EMPLOYEE</h2>
				<div>
				<a href="adminPortal.html"><button type="button" class="btn btn-success">Go Back</button></a>
				</div>
				<div>
					<div id="employee-view"></div>
					<script type="text/template" id="employee-temp">
  <b>Id:</b> <%=id%> , <b>Name:</b> <%=name%> ,<b> Password:</b> <%=password%> , <b>Userrole: </b><%=userrole%> ,<b> Contact:</b> <%=contact%> ,<b> Email:</b> <%=email%>
                    </script>
				</div>
	<script type="text/javascript">
		var EmployeeModel = Backbone.Model.extend({
			defaults : {
				id : null,
				name : "",
				password : "",
				userrole : "",
				contact : null,
				email : ""
			}
		});

		var EmployeeCollection = Backbone.Collection.extend({
			model : EmployeeModel,
			url : '/messenger/webapi/admin'
		});

		var ViewAll = Backbone.View.extend({
			el : '#employee-view',
			initialize : function() {
				this.listenTo(this.model, 'sync change', this.render);
				this.collection.fetch();
				this.render();
			},
			render : function() {
				this.collection.each(function(employee) {
					var employeeView = new EmployeeView({
						model : employee
					});
					this.$el.append(employeeView.render().el); 
				}, this);
				return this; // returning this for chaining..
			}
		});
		var EmployeeView = Backbone.View.extend({
			//tagName : 'li',
			template : _.template($('#employee-temp').html()),
			render : function() {
				this.$el.html(this.template(this.model.toJSON()));
				return this; // returning this from render method..
			}
		});

		var employeeCollection = new EmployeeCollection();
		var viewAll = new ViewAll({
			collection : employeeCollection
		});
		$(document.body).append(viewAll.render().el);
	</script>
</body>
</html>